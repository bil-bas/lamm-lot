#:kivy 2.3.1

#:include lammlot/kv/search_result.kv
#:include lammlot/kv/sticker_size_button.kv


<SearchScreen>:
    id: search_screen
    name: 'search'

    BoxLayout:
        padding: 30
        spacing: 30
        orientation: 'vertical'

        StackLayout:
            size_hint: 1, 0.05
            spacing: 16

            Button:
                id: site_picker
                on_release: search_screen.open_site_menu(self)
                size_hint_x: None
                width: 400

            BoxLayout:
                orientation: 'horizontal'
                spacing: 30
                size_hint_x: None
                width: 500

                Label:
                    text: 'SKU'
                    text_size: self.size
                    halign: 'right'
                    size_hint_x: None

                TextInput:
                    id: sku_search
                    size_hint_x: None

                Label:
                    text: 'Title'
                    halign: 'right'
                    size_hint_x: None

                TextInput:
                    id: name_search
                    size_hint_x: None

            Button:
                text: 'Search'
                on_press: search_screen.refresh_items()
                size_hint_x: None

        Label:
            id: search_empty
            text: 'Search now!'
            size_hint_y: None
            height: 200 if self.text else 0

        SearchResults:
            id: item_list
            viewclass: 'SearchResult'

            SelectableRecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                multiselect: True
                touch_multiselect: True

        StackLayout:
            size_hint: 1, 0.05
            spacing: 30

            Label:
                text: "Sticker size"
                size_hint_x: None

            BoxLayout:
                id: sticker_size_buttons
                orientation: 'horizontal'
                size_hint_x: None
                width: len(self.children) * 150

            Button:
                id: generate_button
                size_hint_x: None
                text: 'Generate'
                on_press: search_screen.on_generate()
                disabled: True
