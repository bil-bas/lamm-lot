#:kivy 2.3.1

#:include lammlot/kv/search_result.kv
#:include lammlot/kv/sticker_size_button.kv


<SearchScreen>:
    id: search_screen
    name: 'search'

    BoxLayout:
        padding: 30
        spacing: 30
        orientation: 'vertical'

        StackLayout:
            size_hint: 1, None
            height: 40
            spacing: 16

            Button:
                id: site_picker
                on_release: search_screen.open_site_menu(self)
                size_hint_x: None
                width: 400

            BoxLayout:
                orientation: 'horizontal'
                spacing: 30
                size_hint_x: None
                width: 500

                Label:
                    text: 'SKU'
                    halign: 'right'
                    text_size: self.size

                TextInput:
                    id: sku_search

                Label:
                    text: 'Title'
                    halign: 'right'
                    text_size: self.size

                TextInput:
                    id: name_search

            Button:
                text: 'Search'
                on_press: search_screen.refresh_items()
                size_hint_x: None

        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, None
            height: 40

            Label:
                id: search_empty
                text: 'Search now!'
                size_hint_y: None
                height: 100 if self.text else 0

            Button:
                id: select_all
                text: "Select All"
                on_press: item_list_container.select_all()
                disabled: True
                size_hint_x: None
                width: 150

            Button:
                id: select_none
                text: "Select None"
                on_press: item_list_container.clear_selection()
                disabled: True
                size_hint_x: None
                width: 150

        SearchResults:
            id: item_list
            viewclass: 'SearchResult'

            SelectableRecycleBoxLayout:
                id: item_list_container
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                multiselect: True
                touch_multiselect: True

        StackLayout:
            size_hint: 1, None
            spacing: 30
            height: 40

            Label:
                text: "Sticker size"
                size_hint_x: None

            BoxLayout:
                id: sticker_size_buttons
                orientation: 'horizontal'
                size_hint_x: None
                width: len(self.children) * 150

            Button:
                id: generate_button
                size_hint_x: None
                text: 'Generate'
                on_press: search_screen.on_generate()
                disabled: True
